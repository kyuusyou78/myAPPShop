"use strict";(self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[]).push([[250],{2255:function(t,s,o){o.d(s,{FH:function(){return i},oo:function(){return e},ry:function(){return n}});var a=o(2756);const e=t=>{const{sortType:s,sortPrice:o,categoryId:e,goodsName:i,page:n}=t;return(0,a.A)({url:"/goods/list",params:{sortType:s,sortPrice:o,categoryId:e,goodsName:i,page:n}})},i=t=>(0,a.A)({url:"/goods/detail",params:{goodsId:t}}),n=(t,s)=>(0,a.A)({url:"/comment/listRows",params:{goodsId:t,limit:s}})},2250:function(t,s,o){o.r(s),o.d(s,{default:function(){return v}});o(6206);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("van-nav-bar",{attrs:{title:"商品详情页","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-swipe",{attrs:{autoplay:"4000"},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"custom-indicator"},[t._v(t._s(t.current+1)+"/"+t._s(t.GoodsImage.length))])]},proxy:!0}])},t._l(t.GoodsImage,(function(t){return s("van-swipe-item",{key:t.file_id},[s("img",{staticClass:"swipeImg",attrs:{src:t.external_url}})])})),1),s("div",[s("div",{staticClass:"shoppingInfo"},[s("div",{staticClass:"price"},[s("div",{staticClass:"newPrice"},[t._v("￥"+t._s(t.GoodsItem.goods_price_min))]),s("div",{staticClass:"oldPrice"},[t._v("￥"+t._s(t.GoodsItem.goods_price_max))])]),s("div",{staticClass:"sell"},[t._v("已售"+t._s(t.GoodsItem.goods_sales)+"件")])]),s("div",{staticClass:"shopName"},[t._v(t._s(t.GoodsItem.goods_name))]),s("div",{staticClass:"AfSale"},[s("div",{staticClass:"AfReturn"},[s("van-icon",{staticClass:"AfIcon",attrs:{name:"passed"}}),s("div",[t._v("七天无理由退货")])],1),s("div",{staticClass:"AfDeliver"},[s("van-icon",{staticClass:"AfIcon",attrs:{name:"passed"}}),s("div",[t._v("48小时内发货")])],1),s("div",{staticClass:"jt"},[t._v(">")])])]),s("div",{staticClass:"evaluateHead"},[s("div",{staticClass:"evaluateLeft"},[t._v("商品评价("+t._s(t.total)+"条)")]),s("div",{staticClass:"evaluateRight"},[t._v(" 查看更多>")])]),t._l(t.GoodsComment,(function(o){return s("div",{key:o.comment_id,staticClass:"userEvaluate"},[s("div",{staticClass:"userEvaluateHead"},[s("img",{staticClass:"UserImg",attrs:{src:o.user.avatar_url||t.defaultImg}}),s("div",{staticClass:"UserName"},[t._v(t._s(o.user.nick_name))]),s("van-rate",{staticClass:"IconEvaluate",attrs:{value:o.score/2,readonly:""}})],1),s("div",{staticClass:"Evaluate"},[t._v(" "+t._s(o.content)+" ")]),s("div",{staticClass:"EvaluateTime"},[s("div",{staticClass:"year"},[t._v(t._s(o.create_time))])])])})),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.GoodsItem.content)}}),s("div",{staticClass:"boxFoot"},[s("div",[s("van-icon",{staticClass:"homeIcon",attrs:{name:"wap-home-o"},on:{click:function(s){return t.$router.push("/")}}}),s("div",{staticClass:"home"},[t._v("首页")])],1),s("div",[s("van-icon",{staticClass:"cartIcon",attrs:{name:"cart-o",badge:t.CartCount},on:{click:function(s){return t.$router.push("/cart")}}}),s("div",{staticClass:"cart"},[t._v("购物车")])],1),s("button",{staticClass:"joinCart",on:{click:t.addFn}},[t._v("加入购物车")]),s("button",{staticClass:"Buy",on:{click:t.BuyNow}},[t._v("立即购买")])]),s("van-action-sheet",{attrs:{title:"cart"===t.mode?"购物车":"立即购买"},model:{value:t.ActionShow,callback:function(s){t.ActionShow=s},expression:"ActionShow"}},[s("div",{staticClass:"content"},[s("img",{staticClass:"ActionImg",attrs:{src:t.GoodsItem.goods_image}}),s("div",[s("div",{staticClass:"newPrice"},[t._v("￥"+t._s(t.GoodsItem.goods_price_min))]),s("div",{staticClass:"inventory"},[t._v("库存"+t._s(t.GoodsItem.stock_total))])])]),s("div",{staticClass:"NumberBody"},[s("div",{staticClass:"BuyNumber"},[t._v("数量")]),s("div",[s("CountBox",{model:{value:t.addCount,callback:function(s){t.addCount=s},expression:"addCount"}})],1)]),t.GoodsItem.stock_total>0?s("div",{staticClass:"ButtonBody"},["cart"===t.mode?s("button",{staticClass:"ActionButton",on:{click:t.addCart}},[t._v("加入购物车")]):s("button",{staticClass:"BuyButton",on:{click:t.goBuy}},[t._v("立即购买")])]):s("div",{staticClass:"shoppingNone"},[s("button",{staticClass:"ButtonNone"},[t._v("该商品已抢完")])])])],2)},e=[],i=o(2255),n=o(7767),c=o(4764),d=o(4152),r={name:"orderDetailIndex",data(){return{current:0,value:5,GoodsId:{},GoodsItem:[],GoodsImage:[],GoodsComment:[],total:"",defaultImg:n,ActionShow:!1,mode:"",addCount:1,CartCount:0}},components:{CountBox:c.A},methods:{onChange(t){this.current=t},async getProductDetail(){const t=await(0,i.FH)(this.getGoodId);this.GoodsItem=t.data.detail,this.GoodsImage=t.data.detail.goods_images},async getProductComment(){const t=await(0,i.ry)(this.getGoodId,3);this.GoodsComment=t.data.list,console.log(this.GoodsComment),this.total=t.data.total},addFn(){this.ActionShow=!0,this.mode="cart"},BuyNow(){this.ActionShow=!0,this.mode="BuyNow"},async addCart(){if(!this.$store.getters.token)return void this.$dialog.confirm({title:"温馨提示",message:"此时需要登录才能继续操作",confirmButtonText:"去登录",cancelButtonText:"再逛逛"}).then((()=>{this.$router.replace({path:"/login",query:{backUrl:this.$route.fullPath}})})).catch((()=>{}));const t=await(0,d.U4)(this.getGoodId,this.addCount,this.GoodsItem.skuList[0].goods_sku_id);console.log(t),this.CartCount=t.data.cartTotal,this.$toast("加入购物车成功"),this.ActionShow=!1},goBuy(){this.$store.getters.token?this.$router.push({path:"/pay",query:{mode:"buyNow",goodsId:this.getGoodId,goodsSkuId:this.GoodsItem.skuList[0].goods_sku_id,goodsNum:this.addCount}}):this.$dialog.confirm({title:"温馨提示",message:"此时需要登录才能继续操作",confirmButtonText:"去登录",cancelButtonText:"再逛逛"}).then((()=>{this.$router.replace({path:"/login",query:{backUrl:this.$route.fullPath}})})).catch((()=>{}))}},computed:{getGoodId(){return this.$route.params.id}},created(){this.getProductDetail(),this.getProductComment()}},l=r,u=o(6501),m=(0,u.A)(l,a,e,!1,null,"3f82803d",null),v=m.exports}}]);
//# sourceMappingURL=250.6aec15ad.js.map