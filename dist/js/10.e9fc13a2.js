"use strict";(self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[]).push([[10],{7700:function(e,t,s){s.d(t,{GY:function(){return r},Iu:function(){return c},PC:function(){return o},Re:function(){return a},Yx:function(){return u},cA:function(){return l},dr:function(){return n},nW:function(){return d}});var i=s(2756);const a=()=>(0,i.A)({url:"/address/list",method:"get"}),n=()=>(0,i.A)({url:"/region/tree"}),r=(e,t,s,a=[])=>(0,i.A)({url:"/address/add",method:"post",data:{form:{name:e,phone:t,detail:s,region:a}}}),d=(e,t,s,a,n=[])=>(0,i.A)({url:"/address/edit",method:"post",data:{addressId:e,form:{name:t,phone:s,detail:a,region:n}}}),o=e=>(0,i.A)({url:"/address/remove",method:"post",data:{addressId:e}}),l=e=>(0,i.A)({url:"/address/setDefault",method:"post",data:{addressId:e}}),c=()=>(0,i.A)({url:"/address/defaultId"}),u=e=>(0,i.A)({url:"/address/detail",params:{addressId:e}})},1010:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});s(5026);var i=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"收货地址","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}}),t("div",{staticClass:"AddressHead"},[t("div",{staticClass:"headLeft",on:{click:function(t){e.changeButton=!e.changeButton}}},[e._v("管理")]),t("div",{staticClass:"headRight",on:{click:e.addAddress}},[e._v("新增地址")])]),e._l(e.AddressList,(function(s){return t("div",{key:s.address_id,staticClass:"AddressBody"},[t("div",{staticClass:"BodyInfo"},[t("span",{staticClass:"name"},[e._v(e._s(s.name)+" "),t("span",{staticClass:"mobile"},[e._v(e._s(s.phone))])]),t("span",{staticClass:"address"},[e._v(e._s(s.region.province+s.region.city+s.region.region+s.detail))]),t("van-checkbox",{staticClass:"bodyChecked",attrs:{value:e.defId===s.address_id,"icon-size":"18px"},on:{click:function(t){return e.setDefAddress(s.address_id)}}},[e._v("默认地址")])],1),e.changeButton?t("van-icon",{staticClass:"BodyRight",attrs:{name:"edit",size:"20px"},on:{click:function(t){return e.handleChange(s.address_id)}}}):t("button",{staticClass:"BodyRightButton",on:{click:function(t){return e.removeAddress(s.address_id)}}},[e._v("删除")])],1)})),t("van-dialog",{attrs:{title:"修改地址","show-cancel-button":""},on:{confirm:e.changeAddress},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}},[t("form",{staticClass:"editForm"},[t("div",{staticClass:"NewProvince"},[t("span",[e._v("请输入省份")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.NewAddress.province,expression:"NewAddress.province"}],staticClass:"NewProvince",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.NewAddress,"province",t.target.multiple?s:s[0])}}},e._l(e.AllProduct,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0)]),t("div",{staticClass:"NewCity"},[t("span",[e._v("请输入市")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.NewAddress.city,expression:"NewAddress.city"}],staticClass:"NewCity",on:{click:e.handleCity,change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.NewAddress,"city",t.target.multiple?s:s[0])}}},e._l(e.AllCity,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0)]),t("div",{staticClass:"NewRegion"},[t("span",[e._v("请输入区")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.NewAddress.region,expression:"NewAddress.region"}],staticClass:"NewRegion",on:{click:e.handleRegion,change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.NewAddress,"region",t.target.multiple?s:s[0])}}},e._l(e.AllRegion,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0)]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.NewDetail,expression:"NewDetail"}],staticClass:"NewDetail",attrs:{placeholder:"请输入详细收货地址"},domProps:{value:e.NewDetail},on:{input:function(t){t.target.composing||(e.NewDetail=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.NewName,expression:"NewName"}],staticClass:"NewName",attrs:{placeholder:"请输入收货人姓名"},domProps:{value:e.NewName},on:{input:function(t){t.target.composing||(e.NewName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.NewPhone,expression:"NewPhone"}],staticClass:"NewPhone",attrs:{placeholder:"请输入手机号"},domProps:{value:e.NewPhone},on:{input:function(t){t.target.composing||(e.NewPhone=t.target.value)}}})])]),t("van-dialog",{attrs:{title:"添加地址","show-cancel-button":""},on:{confirm:e.addAddressDialog},model:{value:e.addShow,callback:function(t){e.addShow=t},expression:"addShow"}},[t("form",{staticClass:"editForm"},[t("div",{staticClass:"NewProvince"},[t("span",[e._v("请输入省份")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.NewAddress.province,expression:"NewAddress.province"}],staticClass:"NewProvince",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.NewAddress,"province",t.target.multiple?s:s[0])}}},e._l(e.AllProduct,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0)]),t("div",{staticClass:"NewCity"},[t("span",[e._v("请输入市")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.NewAddress.city,expression:"NewAddress.city"}],staticClass:"NewCity",on:{click:e.handleCity,change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.NewAddress,"city",t.target.multiple?s:s[0])}}},e._l(e.AllCity,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0)]),t("div",{staticClass:"NewRegion"},[t("span",[e._v("请输入区")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.NewAddress.region,expression:"NewAddress.region"}],staticClass:"NewRegion",on:{click:e.handleRegion,change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.NewAddress,"region",t.target.multiple?s:s[0])}}},e._l(e.AllRegion,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0)]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.NewDetail,expression:"NewDetail"}],staticClass:"NewDetail",attrs:{placeholder:"请输入详细收货地址"},domProps:{value:e.NewDetail},on:{input:function(t){t.target.composing||(e.NewDetail=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.NewName,expression:"NewName"}],staticClass:"NewName",attrs:{placeholder:"请输入收货人姓名"},domProps:{value:e.NewName},on:{input:function(t){t.target.composing||(e.NewName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.NewPhone,expression:"NewPhone"}],staticClass:"NewPhone",attrs:{placeholder:"请输入手机号"},domProps:{value:e.NewPhone},on:{input:function(t){t.target.composing||(e.NewPhone=t.target.value)}}})])])],2)},a=[],n=s(7700),r={name:"myAddressIndex",async created(){const e=await(0,n.Re)();console.log(e),this.AddressList=e.data.list;const t=await(0,n.dr)();this.AllProduct=t.data.list;const s=await(0,n.Iu)();console.log(s),this.defId=s.data.defaultId},data(){return{AddressList:[],editShow:!1,addShow:!1,NewAddress:{province_id:"",province:"",city:"",city_id:"",region:"",region_id:""},NewDetail:"",NewName:"",NewPhone:"",AddressId:"",AllProduct:{},AllCity:{},AllRegion:{},ProvinceShow:!1,changeButton:!0,defId:""}},methods:{async handleChange(e){this.editShow=!0,this.AddressId=e},handleCity(){this.NewAddress.province&&(this.AllCity=this.AllProduct[this.NewAddress.province].city)},handleRegion(){this.NewAddress.city&&(this.AllRegion=this.AllCity[this.NewAddress.city].region)},async changeAddress(){const e=this.AllProduct[this.NewAddress.province].name,t=this.AllCity[this.NewAddress.city].name,s=this.AllRegion[this.NewAddress.region].name,i=this.NewAddress.province,a=this.NewAddress.city,r=this.NewAddress.region;if(""===this.NewName||""===this.NewPhone||""===this.NewDetail||""===i||""===a||""===r)return alert("请输入正确的信息"),0;await(0,n.nW)(this.AddressId,this.NewName,this.NewPhone,this.NewDetail,[{label:e,value:i},{label:t,value:a},{label:s,value:r}]),this.NewAddress.province="",this.NewAddress.city="",this.NewAddress.region="",this.NewDetail="",this.NewName="",this.NewPhone="";const d=await(0,n.Re)();this.AddressList=d.data.list},addAddress(){this.addShow=!0},async addAddressDialog(){const e=this.AllProduct[this.NewAddress.province].name,t=this.AllCity[this.NewAddress.city].name,s=this.AllRegion[this.NewAddress.region].name,i=this.NewAddress.province,a=this.NewAddress.city,r=this.NewAddress.region;await(0,n.GY)(this.NewName,this.NewPhone,this.NewDetail,[{value:i,label:e},{value:a,label:t},{value:r,label:s}]);const d=await(0,n.Re)();this.AddressList=d.data.list,this.NewAddress.province="",this.NewAddress.city="",this.NewAddress.region="",this.NewDetail="",this.NewName="",this.NewPhone=""},async removeAddress(e){await(0,n.PC)(e);const t=await(0,n.Re)();this.AddressList=t.data.list},async setDefAddress(e){await(0,n.cA)(e),this.defId=e}},watch:{"NewAddress.province":{deep:!0,handler(e){this.NewAddress.city="",this.NewAddress.region=""}},"NewAddress.city":{deep:!0,handler(e){this.NewAddress.region=""}}}},d=r,o=s(6501),l=(0,o.A)(d,i,a,!1,null,"590a9d85",null),c=l.exports}}]);
//# sourceMappingURL=10.e9fc13a2.js.map