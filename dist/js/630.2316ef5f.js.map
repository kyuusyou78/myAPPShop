{"version":3,"file":"js/630.2316ef5f.js","mappings":"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","sources":["webpack://hm-shopping/./src/views/myorder/index.vue","webpack://hm-shopping/./src/api/order.js","webpack://hm-shopping/src/views/myorder/index.vue","webpack://hm-shopping/./src/views/myorder/index.vue?689b","webpack://hm-shopping/./src/views/myorder/index.vue?309f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"我的订单\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"orderDetail\"},_vm._l((_vm.list),function(item){return _c('div',{key:item.id,class:{active : item.code === _vm.activeIndex},on:{\"click\":function($event){return _vm.handleTitle(item.code)}}},[_vm._v(_vm._s(item.name))])}),0),_vm._l((_vm.dataList),function(item){return _c('div',{key:item.order_id},[_c('div',{staticClass:\"bodyHead\"},[_c('div',{staticClass:\"headLeft\"},[_vm._v(_vm._s(item.create_time))]),(item.state_text !== '待取消')?_c('div',{staticClass:\"headRight\"},[_vm._v(_vm._s(item.state_text))]):_c('div',{staticClass:\"headRight\"},[_vm._v(\"取消成功\")])]),_vm._l((item.goods),function(good){return _c('div',{key:good.goods_image,staticClass:\"orderBody\"},[_c('img',{staticClass:\"bodyImg\",attrs:{\"src\":good.goods_image}}),_c('div',[_c('div',{staticClass:\"bodyTitle\"},[_vm._v(_vm._s(good.goods_name))])]),_c('div',{staticClass:\"bodyPrice\"},[_c('div',{staticClass:\"PriceTop\"},[_vm._v(\"￥\"+_vm._s(good.total_price))]),_c('div',{staticClass:\"PriceBottom\"},[_vm._v(\"x\"+_vm._s(good.total_num))])])])}),_c('div',{staticClass:\"orderFoot\"},[_c('span',{staticClass:\"footInfo\"},[_vm._v(\"共\"+_vm._s(item.total_num)+\"件商品，总金额￥\"+_vm._s(item.total_price))]),(item.state_text !== '待取消')?_c('button',{staticClass:\"footButton\",on:{\"click\":function($event){return _vm.Del(item.order_id)}}},[_vm._v(\"申请取消\")]):_c('button',{staticClass:\"footButton2\"},[_vm._v(\"取消成功\")])])],2)})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\nexport const getOrderList = (dataType, page) => {\r\n  return request({\r\n    url: '/order/list',\r\n    params: {\r\n      dataType,\r\n      page\r\n    }\r\n  })\r\n}\r\n// 取消订单\r\n\r\nexport const DelOrderList = (orderId) => {\r\n  return request({\r\n    url: '/order/cancel',\r\n    method: 'post',\r\n    data: {\r\n      orderId\r\n    }\r\n  })\r\n}\r\n","<template>\r\n    <div>\r\n      <van-nav-bar\r\n        title=\"我的订单\"\r\n        left-arrow\r\n        @click-left=\"$router.go(-1)\"\r\n      />\r\n      <div class=\"orderDetail\">\r\n        <div :class=\"{active : item.code === activeIndex}\" v-for=\"item in list\" :key=\"item.id\" @click=\"handleTitle(item.code)\">{{ item.name }}</div>\r\n      </div>\r\n\r\n      <div v-for=\"item in dataList\" :key=\"item.order_id\">\r\n      <div class=\"bodyHead\">\r\n          <div class=\"headLeft\">{{ item.create_time }}</div>\r\n          <div class=\"headRight\" v-if=\"item.state_text !== '待取消'\">{{item.state_text}}</div>\r\n          <div class=\"headRight\" v-else>取消成功</div>\r\n      </div>\r\n        <div class=\"orderBody\" v-for=\"good in item.goods\" :key=\"good.goods_image\">\r\n            <img class=\"bodyImg\" :src=\"good.goods_image\">\r\n            <div><div class=\"bodyTitle\">{{good.goods_name}}</div></div>\r\n            <div class=\"bodyPrice\">\r\n              <div class=\"PriceTop\">￥{{good.total_price}}</div>\r\n              <div class=\"PriceBottom\">x{{good.total_num}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"orderFoot\">\r\n          <span class=\"footInfo\">共{{item.total_num}}件商品，总金额￥{{item.total_price}}</span>\r\n          <button class=\"footButton\" @click=\"Del(item.order_id)\" v-if=\"item.state_text !== '待取消'\">申请取消</button>\r\n          <button class=\"footButton2\" v-else>取消成功</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n\r\n<script>\r\nimport { DelOrderList, getOrderList } from '@/api/order'\r\n\r\nexport default {\r\n  name: 'myorderIndex',\r\n  data () {\r\n    return {\r\n      list: [\r\n        { id: 1, name: '全部', code: 'all' },\r\n        { id: 2, name: '待支付', code: 'payment' },\r\n        { id: 3, name: '待发货', code: 'delivery' },\r\n        { id: 4, name: '待收货', code: 'received' },\r\n        { id: 5, name: '待评价', code: 'comment' }\r\n      ],\r\n      dataList: [],\r\n      activeIndex: 'all'\r\n    }\r\n  },\r\n  methods: {\r\n    async handleTitle (code) {\r\n      this.activeIndex = code\r\n      console.log(code)\r\n    },\r\n    async getOrderList () {\r\n      const res = await getOrderList(this.activeIndex, 1)\r\n      this.dataList = res.data.list.data\r\n      console.log(this.dataList)\r\n      this.dataList.forEach((item) => {\r\n        item.total_num = 0\r\n        item.goods.forEach(goods => {\r\n          item.total_num += goods.total_num\r\n        })\r\n      })\r\n    },\r\n    async Del (id) {\r\n      const res = await DelOrderList(id)\r\n      console.log(res)\r\n      this.getOrderList()\r\n    }\r\n  },\r\n  async created () {\r\n    await this.getOrderList()\r\n  },\r\n  watch: {\r\n    activeIndex: {\r\n      immediate: true,\r\n      handler () {\r\n        this.getOrderList()\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n  <style lang=\"less\" scoped>\r\n  .orderDetail{\r\n    display: flex;\r\n    div{\r\n      width: 100%;\r\n      text-align: center;\r\n      padding: 5px;\r\n    }\r\n  }\r\n    .bodyHead{\r\n      display: flex;\r\n      .headLeft{\r\n        margin-right: auto;\r\n        margin-left: 20px;\r\n        margin-top: 15px;\r\n        }\r\n      .headRight{\r\n        margin-left: auto;\r\n        margin-right: 15px;\r\n        margin-top: 15px;\r\n      }\r\n    }\r\n    .orderBody{\r\n      display: flex;\r\n      .bodyImg{\r\n        width: 100px;\r\n        margin-top: 20px;\r\n        margin-left: 10px;\r\n      }\r\n      .bodyTitle{\r\n        margin-top: 20px;\r\n        padding: 0 10px;\r\n        display: -webkit-box;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        -webkit-line-clamp: 2;\r\n        -webkit-box-orient: vertical;\r\n      }\r\n      .bodyPrice{\r\n        display: flex;\r\n        flex-direction: column;\r\n        margin-top: 20px;\r\n        margin-right: 15px;\r\n        margin-left: auto;\r\n        .PriceTop{\r\n          margin-right: auto;\r\n          border: none;\r\n          color: gray;\r\n        }\r\n        .PriceBottom{\r\n          margin-left: auto;\r\n          margin-top: 40px;\r\n          color: gray;\r\n        }\r\n      }\r\n    }\r\n    .orderFoot{\r\n      display: flex;\r\n      flex-direction: column;\r\n      padding-bottom: 30px;\r\n      border-bottom: 1px gray solid;\r\n      .footInfo{\r\n        margin-left: auto;\r\n        margin-right: 15px;\r\n        margin-top: 10px;\r\n      }\r\n      .footButton{\r\n        margin-left: auto;\r\n        margin-right: 15px;\r\n        margin-top: 10px;\r\n        width: 80px;\r\n        height: 25px;\r\n        background-color: red;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 5px;\r\n      }\r\n      .footButton2{\r\n        margin-left: auto;\r\n        margin-right: 15px;\r\n        margin-top: 10px;\r\n        width: 80px;\r\n        height: 25px;\r\n        background-color: gray;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 5px;\r\n      }\r\n    }\r\n  .active{\r\n    border-bottom: 3px red solid;\r\n  }\r\n  </style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.96.1/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.0_webpack@5.96.1/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_css-loader@6.11.0_webpack@5.96.1__lodash@4.17.21__ib2xulq62vyeesmyn6kdmdlhmu/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.96.1/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.0_webpack@5.96.1/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_css-loader@6.11.0_webpack@5.96.1__lodash@4.17.21__ib2xulq62vyeesmyn6kdmdlhmu/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5d1cfa43&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5d1cfa43&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_css-loader@6.11.0_webpack@5.96.1__lodash@4.17.21__ib2xulq62vyeesmyn6kdmdlhmu/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d1cfa43\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","$event","$router","go","staticClass","_l","list","item","key","id","class","active","code","activeIndex","handleTitle","_v","_s","name","dataList","order_id","create_time","state_text","goods","good","goods_image","goods_name","total_price","total_num","Del","staticRenderFns","getOrderList","dataType","page","request","url","params","DelOrderList","orderId","method","data","methods","console","log","res","forEach","created","watch","immediate","handler","component"],"sourceRoot":""}