"use strict";(self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[]).push([[644],{7700:function(s,t,e){e.d(t,{GY:function(){return i},Iu:function(){return l},PC:function(){return n},Re:function(){return o},Yx:function(){return u},cA:function(){return c},dr:function(){return d},nW:function(){return r}});var a=e(2756);const o=()=>(0,a.A)({url:"/address/list",method:"get"}),d=()=>(0,a.A)({url:"/region/tree"}),i=(s,t,e,o=[])=>(0,a.A)({url:"/address/add",method:"post",data:{form:{name:s,phone:t,detail:e,region:o}}}),r=(s,t,e,o,d=[])=>(0,a.A)({url:"/address/edit",method:"post",data:{addressId:s,form:{name:t,phone:e,detail:o,region:d}}}),n=s=>(0,a.A)({url:"/address/remove",method:"post",data:{addressId:s}}),c=s=>(0,a.A)({url:"/address/setDefault",method:"post",data:{addressId:s}}),l=()=>(0,a.A)({url:"/address/defaultId"}),u=s=>(0,a.A)({url:"/address/detail",params:{addressId:s}})},1644:function(s,t,e){e.r(t),e.d(t,{default:function(){return p}});e(6206);var a=function(){var s=this,t=s._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"支付页面","left-arrow":""},on:{"click-left":function(t){return s.$router.go(-1)}}}),t("div",{staticClass:"PayHead",on:{click:function(t){return s.$router.push("/address")}}},[t("van-icon",{staticClass:"HeadIcon",attrs:{name:"logistics",size:"20px"}}),s.AddressList.address_id?t("div",{staticClass:"PayHeadInfo"},[t("span",{staticStyle:{color:"gray","font-size":"15px"}},[s._v(s._s(s.AddressList.name+"/"+s.AddressList.phone))]),t("span",{staticStyle:{color:"gray","font-size":"15px"}},[s._v(s._s(s.AddressList.region.province+s.AddressList.region.city+s.AddressList.region.region+s.AddressList.detail))])]):t("div",{staticClass:"PayHeadInfo"},[t("span",{staticStyle:{color:"gray","font-size":"15px"}},[s._v("请选择配送地址")])]),t("span",{staticClass:"right"},[s._v(">")])],1),t("div",{staticClass:"dotted-line"}),s._l(s.order.goodsList,(function(e){return t("div",{key:e.goods_id,staticClass:"PayBody"},[t("img",{staticClass:"BodyImg",attrs:{src:e.goods_image}}),t("div",{staticClass:"BodyInfo"},[t("span",{staticClass:"BodyName"},[s._v(s._s(e.goods_name))]),t("div",{staticClass:"Body"},[t("span",{staticClass:"BodyCount"},[s._v("x"+s._s(e.total_num))]),t("span",{staticClass:"BodyPrice"},[s._v("￥"+s._s(e.total_pay_price))])])])])})),t("div",{staticClass:"priceInfo"},[t("div",{staticClass:"priceInfo2"},[s._v(" 共"+s._s(s.order.orderTotalNum)+"件商品，合计 ￥"),t("span",{staticClass:"AllPrice"},[s._v(s._s(s.order.orderPrice))])])]),t("div",{staticClass:"payInfo"},[t("div",{staticStyle:{display:"flex"}},[s._v("订单总金额："),t("span",{staticClass:"payInfoAllPrice"},[s._v("￥"+s._s(s.order.orderTotalPrice))])]),s._m(0),s._m(1)]),t("div",{staticClass:"PayWay"},[t("div",{staticClass:"title"},[s._v("支付方式")]),t("div",{staticClass:"PayWayInfo"},[t("div",[t("van-icon",{staticClass:"leftIcon",attrs:{name:"balance-o",size:"20px"}}),t("span",[s._v(" 余额支付 (可用￥"+s._s(s.personal.balance)+"元)")])],1),t("van-icon",{staticClass:"rightIcon",attrs:{name:"passed",size:"20px"}})],1)]),t("div",{staticClass:"message"},[t("span",{staticClass:"messageInfo"},[s._v(" 选填：买家留言（50字内） ")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.message,expression:"message"}],staticClass:"messageInp",domProps:{value:s.message},on:{input:function(t){t.target.composing||(s.message=t.target.value)}}})]),t("div",{staticClass:"PayFoot"},[t("div",{staticClass:"FootLeft"},[t("span",[s._v("实付款：￥")]),t("span",{staticStyle:{color:"red","font-weight":"600"}},[s._v(s._s(s.order.orderPayPrice))])]),t("button",{staticClass:"FootRight",on:{click:s.submitClick}},[s._v("提交订单")])])],2)},o=[function(){var s=this,t=s._self._c;return t("div",{staticStyle:{display:"flex"}},[s._v("优惠券："),t("span",{staticClass:"coupon"},[s._v("无优惠券可用")])])},function(){var s=this,t=s._self._c;return t("div",{staticStyle:{display:"flex"}},[s._v("配送费用："),t("span",{staticClass:"payInfoAllPrice"},[s._v("+￥0.00")])])}],d=e(7700),i=e(2756);const r=(s,t)=>(0,i.A)({url:"/checkout/order",method:"get",params:{mode:s,delivery:10,shopId:0,couponId:0,isUsePoints:0,...t}}),n=(s,t)=>(0,i.A)({url:"/checkout/submit",method:"post",data:{mode:s,delivery:10,couponId:0,isUsePoints:0,payType:10,...t}});var c={name:"LoginIndex",async created(){this.getAddressList(),this.getGoodsList()},data(){return{defAddress:"",AddressList:[],message:"",order:{},personal:{}}},methods:{async getAddressList(){const s=await(0,d.Iu)();if(!s.data.defaultId)return 0;{this.defAddress=s.data.defaultId;const t=await(0,d.Yx)(this.defAddress);this.AddressList=t.data.detail,console.log(this.AddressList)}},async getGoodsList(){if("cart"===this.mode){const s=await r(this.mode,{cartIds:this.cartIds});this.order=s.data.order,this.personal=s.data.personal}else{const s=await r(this.mode,{goodsId:this.goodsId,goodsSkuId:this.goodsSkuId,goodsNum:this.goodsNum});this.order=s.data.order,this.personal=s.data.personal}},async submitClick(){if("cart"===this.mode){const s=await n(this.mode,{cartIds:this.cartIds,remark:this.message});console.log(s)}"buyNow"===this.mode&&await n(this.mode,{remark:this.message,goodsId:this.goodsId,goodsSkuId:this.goodsSkuId,goodsNum:this.goodsNum}),this.$toast.success("支付成功"),this.$router.replace("/myorder")}},computed:{cartIds(){return this.$route.query.cartIds},mode(){return this.$route.query.mode},goodsId(){return this.$route.query.goodsId},goodsSkuId(){return this.$route.query.goodsSkuId},goodsNum(){return this.$route.query.goodsNum}}},l=c,u=e(6501),m=(0,u.A)(l,a,o,!1,null,"2000b977",null),p=m.exports}}]);
//# sourceMappingURL=644.309fc364.js.map